<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Internals · EnergyModelsInvestments.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link rel="canonical" href="https://clean_export.pages.sintef.no/energymodelsinvestments.jl/library/internals/"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">EnergyModelsInvestments.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/quick-start/">Quick Start</a></li><li><a class="tocitem" href="../../manual/philosophy/">Philosophy</a></li><li><a class="tocitem" href="../../manual/simple-example/">Example</a></li><li><a class="tocitem" href="../../manual/NEWS/">Release notes</a></li></ul></li><li><span class="tocitem">Library</span><ul><li><a class="tocitem" href="../public/">Public</a></li><li class="is-active"><a class="tocitem" href>Internals</a><ul class="internal"><li><a class="tocitem" href="#Index"><span>Index</span></a></li><li><a class="tocitem" href="#Types"><span>Types</span></a></li><li><a class="tocitem" href="#Methods"><span>Methods</span></a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Library</a></li><li class="is-active"><a href>Internals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Internals</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://gitlab.sintef.no/clean_export/energymodelsinvestments.jl/blob/main/EnergyModelsInvestments/docs/src/library/internals.md#" title="Edit on GitLab"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitLab</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Internals"><a class="docs-heading-anchor" href="#Internals">Internals</a><a id="Internals-1"></a><a class="docs-heading-anchor-permalink" href="#Internals" title="Permalink"></a></h1><h2 id="Index"><a class="docs-heading-anchor" href="#Index">Index</a><a id="Index-1"></a><a class="docs-heading-anchor-permalink" href="#Index" title="Permalink"></a></h2><ul><li><a href="#EnergyModelsInvestments.AbstractInvestmentModel"><code>EnergyModelsInvestments.AbstractInvestmentModel</code></a></li><li><a href="#EnergyModelsInvestments.Investment"><code>EnergyModelsInvestments.Investment</code></a></li><li><a href="#EnergyModelsInvestments.SemiContiInvestment"><code>EnergyModelsInvestments.SemiContiInvestment</code></a></li><li><a href="#EnergyModelsBase.constraints_capacity_installed-Tuple{Any, EnergyModelsBase.Node, TimeStruct.TimeStructure, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.constraints_capacity_installed</code></a></li><li><a href="#EnergyModelsBase.constraints_capacity_installed-Tuple{Any, EnergyModelsBase.Storage, TimeStruct.TimeStructure, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.constraints_capacity_installed</code></a></li><li><a href="#EnergyModelsBase.objective-Tuple{Any, Any, Any, Any, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.objective</code></a></li><li><a href="#EnergyModelsBase.variables_capex-Tuple{Any, Any, Any, Any, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.variables_capex</code></a></li><li><a href="#EnergyModelsInvestments.check_investment_data-Tuple{Any, Any}"><code>EnergyModelsInvestments.check_investment_data</code></a></li><li><a href="#EnergyModelsInvestments.get_start_cap-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.get_start_cap</code></a></li><li><a href="#EnergyModelsInvestments.has_investment-Tuple{EnergyModelsBase.Node}"><code>EnergyModelsInvestments.has_investment</code></a></li><li><a href="#EnergyModelsInvestments.has_investment-Tuple{Vector{&lt;:EnergyModelsBase.Node}}"><code>EnergyModelsInvestments.has_investment</code></a></li><li><a href="#EnergyModelsInvestments.investment_data-Tuple{Any}"><code>EnergyModelsInvestments.investment_data</code></a></li><li><a href="#EnergyModelsInvestments.investment_mode-Tuple{Any}"><code>EnergyModelsInvestments.investment_mode</code></a></li><li><a href="#EnergyModelsInvestments.lifetime_mode-Tuple{Any}"><code>EnergyModelsInvestments.lifetime_mode</code></a></li><li><a href="#EnergyModelsInvestments.max_add-Tuple{EnergyModelsBase.Node, Any}"><code>EnergyModelsInvestments.max_add</code></a></li><li><a href="#EnergyModelsInvestments.min_add-Tuple{EnergyModelsBase.Node, Any}"><code>EnergyModelsInvestments.min_add</code></a></li><li><a href="#EnergyModelsInvestments.set_capacity_cost-NTuple{5, Any}"><code>EnergyModelsInvestments.set_capacity_cost</code></a></li><li><a href="#EnergyModelsInvestments.set_capacity_installation-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.set_capacity_installation</code></a></li><li><a href="#EnergyModelsInvestments.set_capex_value-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.set_capex_value</code></a></li><li><a href="#EnergyModelsInvestments.set_investment_properties-Tuple{Any, Any}"><code>EnergyModelsInvestments.set_investment_properties</code></a></li><li><a href="#EnergyModelsInvestments.set_storage_installation-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.set_storage_installation</code></a></li></ul><h2 id="Types"><a class="docs-heading-anchor" href="#Types">Types</a><a id="Types-1"></a><a class="docs-heading-anchor-permalink" href="#Types" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.AbstractInvestmentModel" href="#EnergyModelsInvestments.AbstractInvestmentModel"><code>EnergyModelsInvestments.AbstractInvestmentModel</code></a> — <span class="docstring-category">Type</span></header><section><div><p>An abstract investment model type</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.Investment" href="#EnergyModelsInvestments.Investment"><code>EnergyModelsInvestments.Investment</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Investment type traits for nodes. </p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.SemiContiInvestment" href="#EnergyModelsInvestments.SemiContiInvestment"><code>EnergyModelsInvestments.SemiContiInvestment</code></a> — <span class="docstring-category">Type</span></header><section><div><p>Semi-continuous investment, either zero or between a minimum and a maximum value, involves a binary variable. </p></div></section></article><h2 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsBase.constraints_capacity_installed-Tuple{Any, EnergyModelsBase.Node, TimeStruct.TimeStructure, EnergyModelsInvestments.AbstractInvestmentModel}" href="#EnergyModelsBase.constraints_capacity_installed-Tuple{Any, EnergyModelsBase.Node, TimeStruct.TimeStructure, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.constraints_capacity_installed</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">EMB.constraints_capacity_installed(m, n::EMB.Node, 𝒯, modeltype::AbstractInvestmentModel</code></pre><p>Set capacity-related constraints for nodes <code>𝒩</code> for investment time structure <code>𝒯</code>:</p><ul><li>bounds</li><li>binary for BinaryInvestment</li><li>link capacity variables</li></ul></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsBase.constraints_capacity_installed-Tuple{Any, EnergyModelsBase.Storage, TimeStruct.TimeStructure, EnergyModelsInvestments.AbstractInvestmentModel}" href="#EnergyModelsBase.constraints_capacity_installed-Tuple{Any, EnergyModelsBase.Storage, TimeStruct.TimeStructure, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.constraints_capacity_installed</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">constraints_capacity_installed(m, n::Storage, 𝒯::TimeStructure, modeltype::AbstractInvestmentModel)</code></pre><p>Set storage-related constraints for nodes <code>𝒩ˢᵗᵒʳ</code> for investment time structure <code>𝒯</code>:</p><ul><li>bounds</li><li>binary for BinaryInvestment</li><li>link storage variables</li></ul></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsBase.objective-Tuple{Any, Any, Any, Any, EnergyModelsInvestments.AbstractInvestmentModel}" href="#EnergyModelsBase.objective-Tuple{Any, Any, Any, Any, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.objective</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">EMB.objective(m, 𝒩, 𝒯, modeltype::AbstractInvestmentModel)</code></pre><p>Create objective function overloading the default from EMB for AbstractInvestmentModel.</p><p>Maximize Net Present Value from revenues, investments (CAPEX) and operations (OPEX) </p><p><strong>TODO:</strong></p><p><strong>* consider passing expression around for updating</strong></p><p><strong>* consider reading objective and adding terms/coefficients (from model object <code>m</code>)</strong></p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsBase.variables_capex-Tuple{Any, Any, Any, Any, EnergyModelsInvestments.AbstractInvestmentModel}" href="#EnergyModelsBase.variables_capex-Tuple{Any, Any, Any, Any, EnergyModelsInvestments.AbstractInvestmentModel}"><code>EnergyModelsBase.variables_capex</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">EMB.variables_capex(m, 𝒩, 𝒯, 𝒫, modeltype::AbstractInvestmentModel)</code></pre><p>Create variables for the capital costs for the invesments in storage and  technology nodes.</p><p>Additional variables for investment in capacity:     * <code>:capex_cap</code> - CAPEX costs for a technology     * <code>:cap_invest_b</code> - binary variable whether investments in capacity are happening     * <code>:cap_remove_b</code> - binary variable whether investments in capacity are removed     * <code>:cap_current</code> - installed capacity for storage in each strategic period     * <code>:cap_add</code> - added capacity     * <code>:cap_rem</code> - removed capacity</p><p>Additional variables for investment in storage:     * <code>:capex_stor</code> - CAPEX costs for increases in the capacity of a storage     * <code>:stor_cap_invest_b</code> - binary variable whether investments in capacity are happening     * <code>:stor_cap_remove_b</code> - binary variable whether investments in capacity are removed     * <code>:stor_cap_current</code> - installed capacity for storage in each strategic period     * <code>:stor_cap_add</code> - added capacity     * <code>:stor_cap_rem</code> - removed capacity</p><pre><code class="nohighlight hljs">* `:capex_rate` - CAPEX costs for increases in the rate of a storage
* `:stor_rate_invest_b` - binary variable whether investments in rate are happening
* `:stor_rate_remove_b` - binary variable whether investments in rate are removed
* `:stor_rate_current` - installed rate for storage in each strategic period
* `:stor_rate_add` - added rate
* `:stor_rate_rem` - removed rate</code></pre></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.check_investment_data-Tuple{Any, Any}" href="#EnergyModelsInvestments.check_investment_data-Tuple{Any, Any}"><code>EnergyModelsInvestments.check_investment_data</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">check_investment_data(n, 𝒯)</code></pre><p>Performs various checks on investment data:</p><ul><li>min<em>add has to be less than max</em>add in investments data (Node.Data).</li><li>Existing capacity can not be larger than max installed capacity in the beginning.</li></ul></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.get_start_cap-Tuple{Any, Any, Any}" href="#EnergyModelsInvestments.get_start_cap-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.get_start_cap</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">get_start_cap(n, t, stcap)</code></pre><p>Returns the starting capacity of the storage in the first investment period. If no starting capacity is provided in <code>InvestmentData</code> (default = Nothing), then use the provided capacity from the field Cap.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.has_investment-Tuple{EnergyModelsBase.Node}" href="#EnergyModelsInvestments.has_investment-Tuple{EnergyModelsBase.Node}"><code>EnergyModelsInvestments.has_investment</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">has_investment(n::EMB.Node)</code></pre><p>For a given <code>Node</code>, checks that it contains the required investment data.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.has_investment-Tuple{Vector{&lt;:EnergyModelsBase.Node}}" href="#EnergyModelsInvestments.has_investment-Tuple{Vector{&lt;:EnergyModelsBase.Node}}"><code>EnergyModelsInvestments.has_investment</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">has_investment(𝒩::Vector{&lt;:EMB.Node})</code></pre><p>For a given <code>Vector{&lt;:TransmissionMode}</code>, return all <code>TransmissionMode</code>s with investments.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.investment_data-Tuple{Any}" href="#EnergyModelsInvestments.investment_data-Tuple{Any}"><code>EnergyModelsInvestments.investment_data</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">investment_data(type)</code></pre><p>Return the investment data of the type <code>type</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.investment_mode-Tuple{Any}" href="#EnergyModelsInvestments.investment_mode-Tuple{Any}"><code>EnergyModelsInvestments.investment_mode</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">investment_mode(type)</code></pre><p>Return the investment mode of the type <code>type</code>. By default, all investments are continuous.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.lifetime_mode-Tuple{Any}" href="#EnergyModelsInvestments.lifetime_mode-Tuple{Any}"><code>EnergyModelsInvestments.lifetime_mode</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">lifetime_mode(type)</code></pre><p>Return the lifetime mode of the type <code>type</code>. By default, all investments are unlimited.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.max_add-Tuple{EnergyModelsBase.Node, Any}" href="#EnergyModelsInvestments.max_add-Tuple{EnergyModelsBase.Node, Any}"><code>EnergyModelsInvestments.max_add</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">max_add(n::EMB.Node, t_inv)</code></pre><p>Returns the maximum added capacity in the investment period <code>t_inv</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.min_add-Tuple{EnergyModelsBase.Node, Any}" href="#EnergyModelsInvestments.min_add-Tuple{EnergyModelsBase.Node, Any}"><code>EnergyModelsInvestments.min_add</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">min_add(n::EMB.Node, t_inv)</code></pre><p>Returns the minimum added capacity in the investment period <code>t_inv</code>.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.set_capacity_cost-NTuple{5, Any}" href="#EnergyModelsInvestments.set_capacity_cost-NTuple{5, Any}"><code>EnergyModelsInvestments.set_capacity_cost</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_capacity_cost(m, n, 𝒯, t_inv, modeltype)</code></pre><p>Set the capex_cost based on the technology investment cost, and strategic period length to include the needs for reinvestments and the rest value.  It implements different versions of the lifetime implementation:</p><ul><li>UnlimitedLife:    The investment life is not limited. The investment costs do not consider any reinvestment or rest value.</li><li>StudyLife:        The investment last for the whole study period with adequate reinvestments at end of lifetime and rest value.</li><li>PeriodLife:       The investment is considered to last only for the strategic period. The excess lifetime is considered in the rest value.</li><li>RollingLife:      The investment is rolling to the next strategic periods and it is retired at the end of its lifetime or the end                    of the previous sp if its lifetime ends between two sp.</li></ul></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.set_capacity_installation-Tuple{Any, Any, Any}" href="#EnergyModelsInvestments.set_capacity_installation-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.set_capacity_installation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_capacity_installation(m, n, 𝒯ᴵⁿᵛ)</code></pre><p>Add constraints related to capacity installation depending on investment mode of node <code>n</code></p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.set_capex_value-Tuple{Any, Any, Any}" href="#EnergyModelsInvestments.set_capex_value-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.set_capex_value</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_capex_value(years, lifetime, r)</code></pre><p>Calculate the discounted values used in the lifetime calculations. The input to the function is given as:     years       Either remaining(t<em>inv, 𝒯) for StudyLife or                 duration(t</em>inv) for  PeriodLife                 the calculation of required investments     lifetime    lifetime of the node     r           Discount rate</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.set_investment_properties-Tuple{Any, Any}" href="#EnergyModelsInvestments.set_investment_properties-Tuple{Any, Any}"><code>EnergyModelsInvestments.set_investment_properties</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_investment_properties(n, var)</code></pre><p>Set investment properties for variable <code>var</code> for type <code>n</code>, e.g., set to binary for <code>BinaryInvestment</code>, bounds, etc.</p></div></section></article><article class="docstring"><header><a class="docstring-binding" id="EnergyModelsInvestments.set_storage_installation-Tuple{Any, Any, Any}" href="#EnergyModelsInvestments.set_storage_installation-Tuple{Any, Any, Any}"><code>EnergyModelsInvestments.set_storage_installation</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">set_storage_installation(m, n, 𝒯ᴵⁿᵛ)</code></pre><p>Add constraints related to storage installation depending on investment mode of node <code>n</code></p></div></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../public/">« Public</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Friday 16 June 2023 13:43">Friday 16 June 2023</span>. Using Julia version 1.9.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
